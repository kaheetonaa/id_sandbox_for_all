<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta name="pwa-capable" content="yes">
  <link rel="manifest" href="manifest.json">
  <link rel="canonical" href="https://kaheetonaa.github.io/id_sandbox_for_all/" />
  <title>iD</title>
  <link rel='stylesheet' href='dist/iD.css'>
  <link rel='icon' type='icon/euth-icon.png'>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa">
  <meta name="viewport" content="width=device-width; initial-scale=1">
  <meta name='apple-mobile-web-app-capable' content='yes' />
  <meta name='apple-mobile-web-app-status-bar-style' content='black-translucent' />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style type='text/css'>
    /* apply document-level styling to standalone iD only */
    html,
    body {
      width: 89%;
      height: 100%;
      margin: 0;
      padding: 0;
      /* disable elastic page bounce upon scroll */
      overflow: hidden;
      font-family: "Comfortaa";
    }

    #sidepane {
      width: 20%;
      height: 100%;
      background-color: rgb(255, 255, 255);
      z-index: 10;
      position: absolute;
      right: 0;
      top: 0;
      overflow: scroll;
      font-family: "Comfortaa";
      line-height: 2rem;
    }

    .virtual-key {
        display: block;
      }

      .circle-button {
        width: 5%;
        /* Width of the button */
        aspect-ratio: 1/1;
        /* Height of the button */
        border-radius: 50%;
        /* Makes the button circular */
        border: none;
        /* No border */
        color: white;
        /* Text color */
        background-color: hsla(194, 78%, 65%, 0.5);
        /* Button color */
        font-size: 32px;
        /* Font size */
        cursor: pointer;
        /* Change cursor to pointer */
        position: absolute;
        /* Position absolute for free placement */
        display: flex;
        /* Flexbox for centering text */
        justify-content: center;
        /* Center text horizontally */
        align-items: center;
        /* Center text vertically */
        transition: background-color 0.3s;
        /* Smooth background color transition */
        z-index: 20;
      }

      .circle-button:hover {
        background-color: hsla(194, 78%, 65%, 0.8);
        /* Darker shade on hover */
      }

      /* Positioning buttons at different locations */
      #enter {
        bottom: 10%;
        /* 20% from the top */
        right: 25%;
        /* 20% from the left */
      }

      #delete {
        bottom: 10%;
        /* 20% from the bottom */
        right: 35%;
        /* Center horizontally */
      }

      #Q {
        bottom: 10%;
        /* 60% from the top */
        right: 45%;
        /* 20% from the right */
      }
      
      #hot-taskingmanager {
        position:absolute;
        background-color:red;
        left:10px;
        bottom: 5%;
        z-index:25;
        color:white;
      }
    

    @media screen and (orientation: portrait) {
      .virtual-key {
        display: block;
      }

      .circle-button {
        width: 15%;
        /* Width of the button */
        aspect-ratio: 1/1;
        /* Height of the button */
        border-radius: 50%;
        /* Makes the button circular */
        border: none;
        /* No border */
        color: white;
        /* Text color */
        background-color: hsla(194, 78%, 65%, 0.5);
        /* Button color */
        font-size: 32px;
        /* Font size */
        cursor: pointer;
        /* Change cursor to pointer */
        position: absolute;
        /* Position absolute for free placement */
        display: flex;
        /* Flexbox for centering text */
        justify-content: center;
        /* Center text horizontally */
        align-items: center;
        /* Center text vertically */
        transition: background-color 0.3s;
        /* Smooth background color transition */
        z-index: 20;
      }

      .circle-button:hover {
        background-color: hsla(194, 78%, 65%, 0.8);
        /* Darker shade on hover */
      }

      /* Positioning buttons at different locations */
      #enter {
        bottom: 10%;
        /* 20% from the top */
        right: 10%;
        /* 20% from the left */
      }

      #delete {
        bottom: 10%;
        /* 20% from the bottom */
        right: 30%;
        /* Center horizontally */
      }

      #Q {
        bottom: 10%;
        /* 60% from the top */
        right: 50%;
        /* 20% from the right */
      }
            
    

      html,
      body {
        width: 100%;
      }

      #sidepane {
        display: none;
      }
    }

    h1,
    h2 {
      color: #62cbec;
    }

    p {
      font-family: 'Comfortaa';
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

</head>

<div class="virtual-key">
  <button class="circle-button" id="enter"><i class="fa fa-check"></i></button>
  <button class="circle-button" id="delete"><i class="fa fa-close"></i></button>
  <button class="circle-button" id="Q"><i class="fa fa-square"></i></button>
</div>
<div id='sidepane'>
  <div style="padding: 5%">
    <img src="https://euthmappers.com/app/uploads/2023/05/logo.png" />
    <h1>Sandbox for OSM editting ðŸª£ðŸ§¤</h1>
    <p>This site has both iD editor (big map drawing tool on the left) and mini map of actual OSM data on the right</p>
    <h2>Open sandbox editting in iD editor</h2>
    <li>Open the latest in-development version of iD (<a href="https://ideditor.netlify.app/">ideditor.netlify.app</a>)
      (or you can test directly on this site)</li>
    <li>Click the red " live " button in the status bar at the bottom.</li>
    <li>When the text changed to dev, The sandbox is ready!</li>

    <h2>Open sandbox editting in JOSM</h2>
    <li>Go to the Edit menu and select Preferences > OSM server</li>
    <li>Uncheck "Use the default OSM server".</li>
    <li>Change OSM Server URL toÂ https://api06.dev.openstreetmap.org/api and add your authentication by selecting Use
      Oath 2.0 and click on Authorize now (fully automatic)</li>
    <li>An (dev)Openstreetmap site appear, click on Authorize , a site with the text â€˜OKâ€™ will appear.
      Come back to Preferences window in JOSM, press OK</li>
  </div>
</div>
</div>

<body>
  <div id='id-container'></div>
<a id="hot-taskingmanager" href="tm.html">[Only for IOS]Tasking-Manager-Access</a><br>
<script>
  function getView() {
    hash = window.location.hash.substr(1);
    if (window.location.hash) {
      result = hash.split('&').reduce(function (res, item) {
        var parts = item.split('=');
        res[parts[0]] = parts[1];
        return res;
      }, {});
      console.log(result['taskcode'])
        if (result['taskcode']!== undefined) {
        document.getElementById("hot-taskingmanager").href="tm.html#taskcode="+result['taskcode'];
        } else {
          document.getElementById("hot-taskingmanager").href="tm.html";
        }
      // Fragment exists
    } else {
      // Fragment doesn't exist
    }
  }
  getView();

</script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker
        .register('/id_sandbox_for_all/sw.js', { scope: '/id_sandbox_for_all/' })
        .then(() => { console.log('Service Worker Registered'); });
    }
    var container = document.getElementById('id-container');
    var newScript = document.createElement('script');
    newScript.type = 'text/javascript';
    newScript.onload = checkScript;
    newScript.onerror = checkScript;
    newScript.src = 'dist/iD.js';

    document.getElementsByTagName('head')[0].appendChild(newScript);

    function openTaskingManager() {
      window.location.replace('https://tasks.hotosm.org/projects/17833/')
    }

    function checkScript() {
      //if (typeof iD === 'undefined' || !iD.utilDetect().support) {
      //container.innerHTML = 'Sorry, your browser is not currently supported. Please use another <a href="https://github.com/openstreetmap/iD#basics">browser</a> or <a href="https://wiki.openstreetmap.org/wiki/Editors">editor</a> to contribute to the map.';
      //container.style.padding = '20px';

      //} else {
      var context = iD.coreContext()
        .assetPath('https://kaheetonaa.github.io/id_sandbox_for_all/dist/')
        .containerNode(container);
      window.context = window.id = context;  // for debugging
      context.init();

      // disable boundaries (unless we have an explicit disable_features list)
      var q = iD.utilStringQs(window.location.hash);
      if (!q.hasOwnProperty('disable_features')) {
        context.features().disable('boundaries');
      }
      //}
    }

    function triggerKeyPress(keyCode) {
      const event = new KeyboardEvent('keydown', {
        key: keyCode,
        code: keyCode,
        keyCode: keyCode,
        charCode: keyCode,
        which: keyCode,
        bubbles: true
      });
      document.dispatchEvent(event);
    }

    // Handle Enter key
    document.getElementById("enter").addEventListener("click", function () {
      triggerKeyPress('Enter');
    });
    // Handle Delete key
    document.getElementById("delete").addEventListener("click", function () {
      triggerKeyPress('Delete');
    });

    document.getElementById("Q").addEventListener("click", function () {
      triggerKeyPress('Q');
    });
    
          function isIOS() {
  return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
}
      if (!isIOS()) {
        console.log('not ios')
        document.getElementById("hot-taskingmanager").style.display="none";
      }
  </script>
</body>

</html>